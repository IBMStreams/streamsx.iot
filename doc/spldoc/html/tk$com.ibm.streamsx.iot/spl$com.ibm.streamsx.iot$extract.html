<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File extract.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File extract.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">extract.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.iot Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.iot.html">com.ibm.streamsx.iot 1.2.0</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.iot.html">com.ibm.streamsx.iot</a> &gt; extract.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
  <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Operators</dt>

      <dd class="dd">
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$extract.html#spldoc_compilationunit__composite_operator__DeviceEventExtractData">DeviceEventExtractData</a></strong>: Extract application event data into an SPL tuple from the JSON.
</li>

</ul>

      </dd>

    
  </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composites</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__DeviceEventExtractData"><h2 class="title sectiontitle splpart">composite DeviceEventExtractData(output EventsWithData; input stream&lt;DeviceEvent&gt; Events)</h2>
  
</div>

<div class="section splgraph">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.iot/op$com.ibm.streamsx.iot$DeviceEventExtractData.svg" width="353" height="109"/>
</div>

<div class="section">

<p class="p">Extract application event data into an SPL tuple from the JSON. Extracts the data portion of an device event into the output tuple's attributes.
</p>

<p class="p">The application event data is the value of the <tt class="ph tt">d</tt> key in the event's JSON. It is extracted to tuple type <tt class="ph tt">dataType</tt> in the output tuple with the assumption is is an JSON object.
</p>

<p class="p">The structure of <tt class="ph tt">dataType</tt> is expected to match JSON schema of the application event data. A subset of the attributes can be specified as well. Only those attributes that are present in <tt class="ph tt">dataType</tt> and the application event data will be converted. All other attributes will be ignored. If an invalid JSON string is found in the input, the operator will fail. Null values in JSON arrays are ignored. Null values for all other attributes will result in default initializled output attributes. Limitations: BLOB, MAP and COMPLEX attribute types are not supported in <tt class="ph tt">dataType</tt> and will be ignored.
</p>

<p class="p">The event's timestamp (<tt class="ph tt">ts</tt> in the JSON) is extracted to the attribute <tt class="ph tt">eventTs</tt> in the output tuple. <tt class="ph tt">eventTs</tt> has type <tt class="ph tt">com.ibm.streamsx.datetime.TimeMillis</tt> representing the number of milliseconds since the 1970/01/01 epoch.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Parameters</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">events</strong>: Filter expression for events to be extracted
</li>

<li class="sli"><strong class="ph b">dataType</strong>: Schema type used to convert the event's data JSON to. 
</li>

</ul>

</div>

<div class="section"><h2 class="title sectiontitle">Input Ports</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">Events</strong>: Input stream of <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEvent">DeviceEvent</a> tuples.
</li>

</ul>

</div>

<div class="section"><h2 class="title sectiontitle">Output Ports</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">EventsWithData</strong>: Output stream of device events with the timestamp and data extracted into an SPL tuple. Type of the stream is: <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEventTs">DeviceEventTs</a> <tt class="ph tt">dataType</tt>.
</li>

</ul>

</div>

</div>


</body>
</html>