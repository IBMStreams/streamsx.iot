<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="SPL File IotPlatform.spl"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_compilationunit"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>SPL File IotPlatform.spl</title>
</head>
<body id="spldoc_compilationunit">


<h1 class="title topictitle1">SPL File <tt class="ph tt">IotPlatform.spl</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.iot Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.iot.html">com.ibm.streamsx.iot 0.8.0.commit_1756881</a> &gt; <a class="xref" href="ns$com.ibm.streamsx.iot.watson.apps.html">com.ibm.streamsx.iot.watson.apps</a> &gt; IotPlatform.spl</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Content</h2>
  
  <dl class="dl">
    <dt class="dt dlterm"/>
<dd class="dd"/>

    
      <dt class="dt dlterm splhead-2">Operators</dt>

      <dd class="dd">
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot.watson.apps$IotPlatform.html#spldoc_compilationunit__composite_operator__IotPlatform">IotPlatform</a></strong>: Application providing integration with an IBM Watson IoT Platform organization This application performs the role of ingest and egress (for device commands) for IBM Watson IoT Platform.
</li>

</ul>

      </dd>

    
  </dl>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Composites</h2>
  
</div>

<div class="section" id="spldoc_compilationunit__composite_operator__IotPlatform"><h2 class="title sectiontitle splpart">composite IotPlatform</h2>
  
</div>

<div class="section">

<p class="p">Application providing integration with an IBM Watson IoT Platform organization
</p>

<p class="p">This application performs the role of ingest and egress (for device commands) for IBM Watson IoT Platform. Multiple independent analytic applications can then subscribe to the published streams as required. Thus these applications are isolated from having to have knowledge of connection details for the IBM Watson IoT Platform organization.
</p>

<p class="p">Streams of device events, commands and statuses are published:
</p>

<div class="p">
<ul class="ul">
<li class="li"> Device events with streams topic: <tt class="ph tt">streamsx/iot/devices/events</tt> with schema of <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEvent">DeviceEvent</a></li>

<li class="li"> Device commands with streams topic: <tt class="ph tt">streamsx/iot/devices/commands/sent</tt> with schema of <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceCmd">DeviceCmd</a></li>

<li class="li"> Device status updates with streams topic: <tt class="ph tt">streamsx/iot/devices/statuses</tt> with schema of <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceStatus">DeviceStatus</a></li>

</ul>

</div>

<p class="p">The streams topic <tt class="ph tt">streamsx/iot/devices/commands/send</tt> (schema <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceCmd">DeviceCmd</a>) is subscribed to allow analytic applications to send commands to specific devices.
</p>

<p class="p">The <tt class="ph tt">Publish</tt> and <tt class="ph tt">Subscribe</tt> model from the <tt class="ph tt">com.ibm.streamsx.topology.topic</tt> toolkit is used. Applications may use the generic <tt class="ph tt">Publish</tt> and <tt class="ph tt">Subscribe</tt> operators from that toolkit but these operators provide additional functionality specific to this toolkit:
</p>

<div class="p">
<ul class="ul">
<li class="li"> <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__EventsSubscribe">com.ibm.streamsx.iot::EventsSubscribe</a> - Subscribe to device events, with filtering on device type and/or event identifier.</li>

<li class="li"> <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandsSubscribe">com.ibm.streamsx.iot::CommandsSubscribe</a> - Subscribe to device commands, with filtering on device type and/or command identifier.</li>

<li class="li"> <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__StatusesSubscribe">com.ibm.streamsx.iot::StatusesSubscribe</a> - Subscribe to device status updates, with filtering on device type.</li>

<li class="li"> <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandPublish">com.ibm.streamsx.iot::CommandPublish</a> - Send a device command that will be sent to the device by this application.</li>

</ul>

</div>

<p class="p"><tt class="ph tt">IotPlatform</tt> supports Watson IoT Platform's scalable application mode that distributes messages (device events, commands and statuses) across multiple MQTT subscribers. This is configured by setting the optional parameters <tt class="ph tt">scaleEvents</tt>, <tt class="ph tt">scaleCommands</tt> and <tt class="ph tt">scaleStatuses</tt>. IBM Streams parallel regions are used to instantiate multiple MQTT source operators and publish those events, commands or statuses using multiple streams. Applications that subscribe using <tt class="ph tt">EventsSubscribe</tt>, <tt class="ph tt">CommandsSubscribe</tt>, <tt class="ph tt">StatusesSubscribe</tt> or <tt class="ph tt">Subscribe</tt> will correctly see the required tuples, regardless of the scale factor or if the subscriber is itself using parallel regions.
</p>

<p class="p">Scalable application mode also supports failures of the MQTT source operators or their connections by automatically delivering messages across the remaining active connections. Once a connection from this application is resetablished it will again be included in message delivery.
</p>

<p class="p">All of this composite's parameters can be set using submission time values at job submission time.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Parameters</h2>

<ul class="sl simple">
<li class="sli"><strong class="ph b">org</strong>: Organization identifier (required)
</li>

<li class="sli"><strong class="ph b">authKey</strong>: API key (required)
</li>

<li class="sli"><strong class="ph b">authToken</strong>: API Token (required)
</li>

<li class="sli"><strong class="ph b">encrypted</strong>: <tt class="ph tt">true</tt> to use encrypted (TLSv1.2) connections to IoT Plaform, <tt class="ph tt">false</tt> to use unencrypted (optional, defaults to <tt class="ph tt">false</tt>)
</li>

<li class="sli"><strong class="ph b">allowFilters</strong>: <tt class="ph tt">true</tt> to use allow applications subscribing to device events, sent device commands and device statuses to push filtering to this application. <tt class="ph tt">false</tt> to disallow execution of subscriber filters (optional defaults to <tt class="ph tt">true</tt>)
</li>

<li class="sli"><strong class="ph b">scaleEvents</strong>: Scaling factor for device events (optional, defaults to <tt class="ph tt">1</tt>)
</li>

<li class="sli"><strong class="ph b">scaleCommands</strong>: Scaling factor for sent device commands. Optional, defaults to <tt class="ph tt">1</tt>)
</li>

<li class="sli"><strong class="ph b">scaleStatuses</strong>: Scaling factor for device statuses (optional, defaults to <tt class="ph tt">1</tt>)
</li>

</ul>

</div>

<div class="section">
</div>

<div class="section">
</div>

<div class="section"><h2 class="title sectiontitle splhead-2">Composite Operator Graph</h2>
  
</div>

<div class="section splgraph">
  <embed class="image" src="../../image/tk$com.ibm.streamsx.iot/op$com.ibm.streamsx.iot.watson.apps$IotPlatform.svg" width="118" height="244"/>
</div>

</div>


</body>
</html>