<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="copyright" content="(C) Copyright 2005"/>
<meta name="DC.rights.owner" content="(C) Copyright 2005"/>
<meta name="DC.Type" content="reference"/>
<meta name="DC.Title" content="Namespace com.ibm.streamsx.iot"/>
<meta name="DC.Format" content="XHTML"/>
<meta name="DC.Identifier" content="spldoc_namespace"/>
<link rel="stylesheet" type="text/css" href="../../html/commonltr.css"/>
<link rel="stylesheet" type="text/css" href="../../html/spldoc.css"/>
<title>Namespace com.ibm.streamsx.iot</title>
</head>
<body id="spldoc_namespace">


<h1 class="title topictitle1">Namespace <tt class="ph tt">com.ibm.streamsx.iot</tt></h1>

<div class="body refbody">
<div class="section">
<p class="p">
<a class="xref" href="../toolkits/toolkits.html">IBMStreams com.ibm.streamsx.iot Toolkit</a> &gt; <a class="xref" href="tk$com.ibm.streamsx.iot.html">com.ibm.streamsx.iot 0.7.0.commit_commit_2492b9c</a> &gt; com.ibm.streamsx.iot</p>

</div>

<div class="section">

<p class="p">Intenet of Things (IoT) integration.
</p>

<p class="p">The expected model for using IBM Streams to analyze events or data from thousands to millions of devices (<em class="ph i">Internet of Things</em>) is that devices will be connected to a IoT scale message hub and Streams applications will subscribe to messages from the message hub to access the device events and to send commands.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">IoT device model
</h2>

<p class="p">TO BE FILLED IN
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Microservices architecture
</h2>

<p class="p">Use of the streaming topic based publish-subscribe model is recommended to allow analytic applications to be developed and deployed independent of the connectivity to message hub.
</p>

<p class="p">This is achieved by submitting the a single application that connects to the device hub wich then publishes stream topics containing the device events, commands and optionally status updates. In addition it subscribes to a stream topic containing commands to be sent to devices.
</p>

<p class="p">Analytic applications then use <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__EventsSubscribe">EventsSubscribe</a>, <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandsSubscribe">CommandsSubscribe</a> and <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__StatusesSubscribe">StatusesSubscribe</a> to subscribe to streams to be analyzed.
</p>

<p class="p">Analytic applications use <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandPublish">CommandPublish</a> to send device commands to individual devices.
</p>

<div class="p">The benefits of this approach are:
<ul class="ul">
<li class="li"> Only a single application needs to know any authorization tokens required to connect to the message hub.</li>

<li class="li"> Analytic applications can be added and removed at any time without disrupting existing running applications.</li>

</ul>

</div>

</div>

<div class="section"><h2 class="title sectiontitle">Device Events
</h2>

<p class="p">Devices publish device events that an SPL application can subscribe to using <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__EventsSubscribe">EventsSubscribe</a>.  The default is to subscribe to all event identifiers from all device types and ids. The operator is parameterized to allow only subscribing to a specific event id (which is really the type of the event) and/or a specific device type.
</p>

<p class="p">The assumption is made that the format of the event is JSON and the resulting stream is of type <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEvent">DeviceEvent</a>. The <tt class="ph tt">jsonString</tt> parameter contains the event payload in serialized JSON. The event payload is a JSON object using <a class="xref" href="https://docs.internetofthings.ibmcloud.com/messaging/payload.html">event format specification</a>, so that the application event data is the value of the <tt class="ph tt">d</tt> key.
</p>

<p class="p">The application event data can be extracted into an SPL tuple using <a class="xref" href="spl$com.ibm.streamsx.iot$extract.html#spldoc_compilationunit__composite_operator__DeviceEventExtractData">DeviceEventExtractData</a>. This operator takes an input stream of type <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEvent">DeviceEvent</a> and produces a stream of type <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEventTs">DeviceEventTs</a> augmented with a <tt class="ph tt">dataType</tt> tuple type specified by the application. Since the application event data might be specific to the type of the <tt class="ph tt">eventId</tt> or even the combination of <tt class="ph tt">typeId</tt> and <tt class="ph tt">eventId</tt> an application may need to use a <tt class="ph tt">Split</tt> operator between the <a class="xref" href="spl$com.ibm.streamsx.iot.watson$device.html#spldoc_compilationunit__composite_operator__DeviceEvents">DeviceEvents</a> and multiple <a class="xref" href="spl$com.ibm.streamsx.iot$extract.html#spldoc_compilationunit__composite_operator__DeviceEventExtractData">DeviceEventExtractData</a> invocations. An example of its use is in the <a class="xref" href="spl$com.ibm.streamsx.iot.watson.quickstart$quickstart.html#spldoc_compilationunit__composite_operator__Quickstart">com.ibm.streamsx.iot.watson.quickstart::Quickstart</a> application.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Device Status
</h2>

<p class="p">Device status events, such as connect or disconnect, are subscribed to using <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__StatusesSubscribe">StatusesSubscribe</a> which produce a stream of type <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceStatus">DeviceStatus</a>.
</p>

</div>

<div class="section"><h2 class="title sectiontitle">Device Commands
</h2>

<p class="p">Devices can be sent commands, an SPL application can subscribe to commands being sent to devices using <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandsSubscribe">CommandsSubscribe</a>.  The default is to subscribe to all commands identifiers for all device types and ids. The operator is parameterized to allow only subscribing to a specific command id (which is really the type of the command) and/or a specific device type. 
</p>

<p class="p">An SPL application can send a command to a specific device using <a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandPublish">CommandPublish</a> with the input stream type of <a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceCmd">DeviceCmd</a>. The <tt class="ph tt">jsonString</tt> attribute contains the application specific portion of the command represented as serialized JSON.
</p>

<p class="p">Applications can use <a class="xref" href="spl$com.ibm.streamsx.iot$command.html#spldoc_compilationunit__composite_operator__CommandTupleToPayload">CommandTupleToPayload</a> to convert an SPL tuple representation of the command payload to JSON.
</p>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Operators</h2>
  
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandPublish">CommandPublish</a></strong>: Publish an event to be sent to a device.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$command.html#spldoc_compilationunit__composite_operator__CommandTupleToPayload">CommandTupleToPayload</a></strong>: Convert tuples to device commands.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__CommandsSubscribe">CommandsSubscribe</a></strong>: Subscribe to device commands published under the streams topic <tt class="ph tt">streamsx/iotdevice/commands/sent</tt>.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$extract.html#spldoc_compilationunit__composite_operator__DeviceEventExtractData">DeviceEventExtractData</a></strong>: Extract application event data into an SPL tuple from the JSON.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__EventsSubscribe">EventsSubscribe</a></strong>: Subscribe to device events published under the streams topic <tt class="ph tt">streamsx/iot/device/events</tt>.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$pubsub.html#spldoc_compilationunit__composite_operator__StatusesSubscribe">StatusesSubscribe</a></strong>: Subscribe to device status updates published under the streams topic <tt class="ph tt">streamsx/iot/device/statuses</tt>.
</li>

</ul>

</div>

<div class="section"><h2 class="title sectiontitle splhead-1">Types</h2>
  
<ul class="sl simple">
<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__Device">Device</a></strong>: A device.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceCmd">DeviceCmd</a></strong>: A device command.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceCmdId">DeviceCmdId</a></strong>: A device with command identifier.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEvent">DeviceEvent</a></strong>: A device event.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEventId">DeviceEventId</a></strong>: A device with event identifier.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceEventTs">DeviceEventTs</a></strong>: A device with event identfier and timestamp.
</li>

<li class="sli"><strong class="ph b"><a class="xref" href="spl$com.ibm.streamsx.iot$types.html#spldoc_compilationunit__type__DeviceStatus">DeviceStatus</a></strong>: A device status event.
</li>

</ul>

</div>

</div>


</body>
</html>